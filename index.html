<!DOCTYPE html>

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, minimal-ui">
    <!-- Google Fonts -->
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300italic,700,700italic">

    <!-- CSS Reset -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/normalize/8.0.1/normalize.css">

    <!-- Milligram CSS -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/milligram/1.4.1/milligram.css">

    <!-- Personal stylesheet-->
    <link rel="stylesheet" href="stylesheet.css">

</head>

<body>
    <main class="wrapper">
        <nav class="navigation">
            <br>
            <section class="container">
                <a class="navigation-title">Rebellion Probe Tracker</h3>
                    <a class="button button-outline float-right" href="#" onclick="refreshSystems()" data-popover="">Reset Systems</a>
                    <a class="button button-outline float-right" href="#" onclick="undo()" data-popover="">Undo</a>
                    <!--<ul class="navigation-list float-right">
                    <li class="navigation-item float-right">
                        <a class="navigation-link" href="#" data-popover="">Help</a>
                    </li>
                </ul>-->
            </section>
            <hr>
        </nav>
        <section class="container">
            <dl id="SystemList">
<script>
var target = document.getElementById("SystemList");
const fullList = ["Alderaan","Bespin","Bothawui","Cato Neimoidia","Corellia","Dagobah","Dantooine","Dathomir","Endor","Feluica","Geonosis","Hoth","Ilum","Kashyyk","Kessel","Malastare","Mandalore","Mon Calamari","Mustafar","Mygeeto","Naboo","Nal Hutta","Ord Mantell","Rodia","Ryloth","Saleucami","Sullust","Tatooine","Toydaria","Utapau","Yavin"];
var shownListItems = [];
var probeHistory = [];


refreshSystems(true);

function refreshSystems(fullRefresh = true) {
    target.innerHTML = "";
    if (fullRefresh) {
        shownListItems = [];
        probeHistory = [];
        for (var i = 0; i < fullList.length; i++) 
            shownListItems.push(true);
    }
    for (var i = 0; i < fullList.length; i++)
        if (shownListItems[i]) 
            target.innerHTML += '<dt id="' + i + '"><p class="float-left">' + fullList[i] + '</p><button class="button float-right" onclick="removeSystem(' + i + ')">Probe System</button><br><hr></dt>';
}

function undo() {
    var i = probeHistory[probeHistory.length - 1];
    console.log(i);
    probeHistory.pop();
    shownListItems[i] = true;
    refreshSystems(false);//Don't do a full refresh
}

function removeSystem(systemI) {
    // HTML side
    //var systemList = document.getElementById("SystemList");//List of systems being displayed
    //var systems = document.getElementById(systemI);//Finds the specific system to remove
    //systemList.removeChild(systems);//Remove in html
    
    // Backend
    shownListItems[systemI] = false;
    var system = fullList[systemI];
    probeHistory.push(systemI);//Adds the removed systems to history.
    refreshSystems(false);
}
</script>
                <!--
                <dt>
                    <p class="float-left">System 1</p>
                    <button class="button float-right">Probe System</button>
                </dt><br><hr>
                <dt>
                    <p class="float-left">System 1</p>
                    <button class="button float-right">Probe System</button>
                </dt>-->
            </dl>
        </section>
    </main>
</body>
